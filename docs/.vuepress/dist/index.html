<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MemberPrism Documentation | MemberPrism</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Open source alternative to memberstack / memberspace , but with both front and backend member-only content protection">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.216dffaf.js" as="script"><link rel="preload" href="/assets/js/2.abbacd5f.js" as="script"><link rel="preload" href="/assets/js/4.5e253ff5.js" as="script"><link rel="prefetch" href="/assets/js/3.752c41d5.js"><link rel="prefetch" href="/assets/js/5.f7ea1688.js"><link rel="prefetch" href="/assets/js/6.a65e5dd2.js"><link rel="prefetch" href="/assets/js/7.1eab93e4.js"><link rel="prefetch" href="/assets/js/8.4e522548.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">MemberPrism</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Home
</a></div><div class="nav-item"><a href="https://github.com/easychen/member-prism" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  en-US
</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">
  zh-CN
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Home
</a></div><div class="nav-item"><a href="https://github.com/easychen/member-prism" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  en-US
</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">
  zh-CN
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MemberPrism Documentation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#features" class="sidebar-link">Features</a></li><li class="sidebar-sub-header"><a href="/#screenshot" class="sidebar-link">Screenshot</a></li></ul></li><li><a href="/#installation" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#installation-via-docker" class="sidebar-link">Installation via Docker</a></li><li class="sidebar-sub-header"><a href="/#manual-installation" class="sidebar-link">Manual installation</a></li></ul></li><li><a href="/#adding-functionality-to-a-website" class="sidebar-link">Adding functionality to a website</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#admin-account" class="sidebar-link">Admin account</a></li><li class="sidebar-sub-header"><a href="/#configure-the-url" class="sidebar-link">Configure the URL</a></li><li class="sidebar-sub-header"><a href="/#get-the-installation-code" class="sidebar-link">Get the installation code</a></li><li class="sidebar-sub-header"><a href="/#copy-feature-links" class="sidebar-link">Copy feature links</a></li></ul></li><li><a href="/#subscription-configuration" class="sidebar-link">Subscription configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#configure-stripe-key" class="sidebar-link">Configure Stripe Key</a></li><li class="sidebar-sub-header"><a href="/#create-price-id" class="sidebar-link">Create Price ID</a></li><li class="sidebar-sub-header"><a href="/#creating-a-subscription-plan" class="sidebar-link">Creating a subscription plan</a></li><li class="sidebar-sub-header"><a href="/#member-only-content-protection" class="sidebar-link">Member-only content protection</a></li><li class="sidebar-sub-header"><a href="/#assigning-content-to-a-subscription-plan" class="sidebar-link">Assigning content to a subscription plan</a></li></ul></li><li><a href="/#back-end-protection" class="sidebar-link">Back-end protection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#principle" class="sidebar-link">Principle</a></li><li class="sidebar-sub-header"><a href="/#usage" class="sidebar-link">Usage</a></li><li class="sidebar-sub-header"><a href="/#security" class="sidebar-link">Security</a></li></ul></li><li><a href="/#more" class="sidebar-link">More</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#about-the-author" class="sidebar-link">About the author</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="memberprism-documentation"><a href="#memberprism-documentation" class="header-anchor">#</a> MemberPrism Documentation</h1> <p><a href="/zh/">简体中文</a></p> <p>⚠️ This document was translated into English by deepl and can be improved by PR</p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>MemberPrism is an open source project for providing membership, subscription and content protection features to existing websites, especially static ones.</p> <p>It features a plug-in approach that allows you to add functionality immediately with a few lines of code. At the same time, these features are implemented in a floating layer format, so that users do not need to leave the site to complete the above features.</p> <h3 id="features"><a href="#features" class="header-anchor">#</a> Features</h3> <p>MemberPrism currently provides the following features.</p> <ul><li>Membership Management
<ul><li>Registration</li> <li>Login</li> <li>Logout</li> <li>Change user level: user/admin</li></ul></li> <li>Subscription Management
<ul><li>Add, modify, delete, deactivate subscription plans</li> <li>Subscribe to a plan through a link</li> <li>User modify, unsubscribe</li></ul></li> <li>Member content protection
<ul><li>Add, modify, delete, deactivate member content</li> <li>Assigning member content to a subscription plan</li> <li>Front-end protection of member content via JavaScript</li> <li>Back-end protection of member content via MemberProxy</li></ul></li></ul> <h3 id="screenshot"><a href="#screenshot" class="header-anchor">#</a> Screenshot</h3> <p><img src="/assets/img/817daf704b66a572f2c3b163320abbc0508b2dd200f7dfd36ab294f58e0e19e0.e3533ad6.png" alt="picture 15"></p> <p><img src="/assets/img/54fc0a9b336b290c16ebf4375808f1c6a15b8fe7f916073893680fce7077950c.38e22bbb.png" alt="picture 16"></p> <p><img src="/assets/img/b217c0402e8f49361a24080b2c91e28f1a24c0b26760aaf89871ac00a0949c9e.01cd5750.png" alt="picture 17"></p> <p><img src="/assets/img/ff792949fdb0d8359b1f20a1db6763d23430e8d94b58180f38be1342f8ccce0c.33b19f02.png" alt="picture 18"></p> <p><img src="/assets/img/42b313a369564f02f6cc7afb400de46e6d08e6d25cf2df0802babdec3263866b.1caaebb8.png" alt="picture 19"></p> <p><img src="/assets/img/f88288b384cfd27d55d410ba9015be1d1b32ed6cf060b46f73dae23f0f497fc4.49898d8d.png" alt="picture 20"></p> <p><img src="/assets/img/20014d5f04411184559b7a49ca1300a9b95e867acda5b7942524f035e054a28b.0f836819.png" alt="picture 21"></p> <p><img src="/assets/img/554aaa554abae4a604986b38b3fbd9900e29aa433448adcb58188a351b3a1ec7.dfacdb2f.png" alt="picture 22"></p> <p><img src="/assets/img/a1cac133c49ff024b2024d1a78d2da451d1e58d3c827651e4dc62090d9e87183.488a5649.png" alt="picture 23"></p> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <h3 id="installation-via-docker"><a href="#installation-via-docker" class="header-anchor">#</a> Installation via Docker</h3> <p>For easy installation, we provide the Docker installation method. It is also recommended to use this method in preference.</p> <h4 id="dependency-environment"><a href="#dependency-environment" class="header-anchor">#</a> Dependency Environment</h4> <p>First, you need a container environment that supports <code>git</code> and <code>docker-compose</code>. If you don't already have it, you can refer to <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-" target="_blank" rel="noopener noreferrer">this article<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> use-docker-compose-on-ubuntu-20-04).</p> <h4 id="initialization"><a href="#initialization" class="header-anchor">#</a> Initialization</h4> <p>Start by clone the project code</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/easychen/member-prism.git prism
</code></pre></div><p>Go to the directory and start the service with <code>docker-compose</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> prism <span class="token operator">&amp;&amp;</span> docker-compose up -d
</code></pre></div><p>The service will start two ports.</p> <ul><li>8801: MemberPrism, the website</li> <li>8802: MemberProxy, where users will access when backend protection is enabled</li></ul> <p>The ports for these two services can be adjusted by modifying the <code>port</code> section in <code>docker-compose.yaml</code> in the root directory.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">'8801:80'</span>
    <span class="token punctuation">-</span> <span class="token string">'8802:8802'</span>
</code></pre></div><h5 id="https-support"><a href="#https-support" class="header-anchor">#</a> HTTPS Support</h5> <p>First, put the certificate in the <code>ssl</code> directory.</p> <p>Open <code>docker/web/vhost.conf</code> and remove the comments before the following lines.</p> <div class="language-conf extra-class"><pre class="language-text"><code>SSLEngine on
SSLCertificateFile /app/ssl/server.crt
SSLCertificateKeyFile /app/ssl/server.key
</code></pre></div><p>Open <code>web/.env</code> and change <code>PRISM_HTTPS</code> to <code>true</code>.</p> <div class="language-conf extra-class"><pre class="language-text"><code>PRISM_HTTPS=true
</code></pre></div><h3 id="manual-installation"><a href="#manual-installation" class="header-anchor">#</a> Manual installation</h3> <p>The main part of MemberPrism is written in Laravel, so developers who are familiar with Laravel can easily build it.</p> <p>Go to the web directory</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /app/web 
</code></pre></div><p>Install the dependencies via compser</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">composer</span> <span class="token function">install</span> 
</code></pre></div><p>Copy <code>.env.example</code> to <code>.env</code> and modify it as appropriate.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> .env.example .env 
</code></pre></div><p>Generate the app key</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan key:generate 
</code></pre></div><p>Initialize the database and fill in the default account</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan migrate --seed
</code></pre></div><p>You need to make sure the following directories are writable, you can change them to 755 or 777.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">chmod</span> -R 0777 /app/web/storage
<span class="token function">chmod</span> -R 0777 /app/web/bootstrap/cache/
</code></pre></div><p>Start proxy</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /app/proxy <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">.</span> /server-linux <span class="token operator">&amp;</span>
</code></pre></div><p>If you are on a Mac environment, use</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /app/proxy <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">.</span> /server-mac <span class="token operator">&amp;</span>
</code></pre></div><h2 id="adding-functionality-to-a-website"><a href="#adding-functionality-to-a-website" class="header-anchor">#</a> Adding functionality to a website</h2> <p>First clarify the following terms.</p> <ul><li><code>TargetSite</code>: the site where you need to add membership and subscription features</li> <li><code>PrismSite</code>: default <code>8801</code> port corresponding to the main site</li> <li><code>ProxySite</code>: default <code>8802</code> port corresponding to the proxy site</li></ul> <p>After installation, visit <code>&lt;ip&gt;:8801</code> to access <code>PrismSite</code>.</p> <h3 id="admin-account"><a href="#admin-account" class="header-anchor">#</a> Admin account</h3> <p>Login with the following account.</p> <ul><li>Username: <code>admin@memberprism.com</code></li> <li>Password: <code>admin</code></li></ul> <p>After logging in, go to the <code>members</code> page and click <code>level</code> to change the user's level.
<img src="/assets/img/e5629dd0d0718e6844a29966eaa1be70ff69f6d540b9df73fb512a8455a1faaf.5892a7f7.png" alt="p1"></p> <h3 id="configure-the-url"><a href="#configure-the-url" class="header-anchor">#</a> Configure the URL</h3> <p>Go to the <code>Settings</code> page and set the name and URL of the <code>PrismSite</code> website. This URL will finally need to be accessible to <code>TargetSite</code> users.</p> <p><img src="/assets/img/5d488deee54ed0b05ffdb6fd5f5642e33bbefa4a441bb81c8a072cc681598c8e.1becf902.png" alt="p3"></p> <h3 id="get-the-installation-code"><a href="#get-the-installation-code" class="header-anchor">#</a> Get the installation code</h3> <p>Go to the <code>Links</code> page, copy <code>Head scripts</code> and paste it into the <code>&lt;head&gt;</code> tag on the <code>TargetSite</code> site page. Note that this code needs to be added to any page that wants to use the MemberPrism feature.</p> <p><img src="/assets/img/5d1e579c1b1b685a759be5201f47a734ee568cc012d068cd18b6b0f533927104.18804581.png" alt="p2"></p> <h3 id="copy-feature-links"><a href="#copy-feature-links" class="header-anchor">#</a> Copy feature links</h3> <p>At the bottom of the <code>Links</code> page, there is the URL for <code>Login</code>, which can be copied and pasted into the corresponding link in <code>TargetSite</code>.</p> <p>The code looks like</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#prism-ajax-login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Login&lt;/a
</code></pre></div><p>When clicked, the result looks like this.</p> <p><img src="/assets/img/548d567dbab937cd2c77d9bce2e62132c91df20b2c4f027aa7871136fdf7f2ac.a95fb44a.png" alt="picture 4"></p> <p>After adding the <code>registration</code>, <code>profile</code> links, this site will have a user system.</p> <h2 id="subscription-configuration"><a href="#subscription-configuration" class="header-anchor">#</a> Subscription configuration</h2> <p>MemberPrism uses <a href="https://stripe.com" target="_blank" rel="noopener noreferrer">Stripe<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to implement payment and subscription related features. This requires you to register a Stripe account first.</p> <p>The following is an example of <code>test mode</code>.</p> <h3 id="configure-stripe-key"><a href="#configure-stripe-key" class="header-anchor">#</a> Configure Stripe Key</h3> <p>Open the <a href="https://dashboard.stripe.com/test/apikeys" target="_blank" rel="noopener noreferrer">API Keys page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> under the <code>Developers</code> menu.</p> <p><img src="/assets/img/f78cb444544a6985f61463396f626bde993a360412463d1726af53250fe548f4.82c20197.png" alt="picture 5"></p> <p>Copy the corresponding Key and fill in the corresponding option in <code>Settings</code> of <code>PrismSite</code>: !</p> <p><img src="/assets/img/9a3fe6dce02bd6cc8484f711f949c16e42c35e84d13d4ea0ace536dc7122f750.969bde3b.png" alt="picture 6"></p> <h3 id="create-price-id"><a href="#create-price-id" class="header-anchor">#</a> Create Price ID</h3> <p>Go to the Stripe dashboard and create a <a href="https://dashboard.stripe.com/test/products/create" target="_blank" rel="noopener noreferrer">product<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Note that in the Pricing section, select Recurring so that it will automatically renew. Just fill in the rest of the fields as you want.</p> <p><img src="/assets/img/48fa4dbf28e3314719f9b69e246ca7bd9f397f64311a11e799e44524aaf46dee.75964ac4.png" alt="picture 7"></p> <p>After creating the product, go to the product details page and you can see the API ID in the Pricing section and record it.</p> <p><img src="/assets/img/fc8073dcebc631393515945821d4c101d32b80aaea1c399e59c47eeb94ef1b68.ecb0794d.png" alt="picture 8"></p> <p>You can create multiple prices according to your needs, and each level of subscription, monthly and yearly payment should be a different price id. These price ids need to be recorded and will be used later when you create a subscription plan.</p> <h3 id="creating-a-subscription-plan"><a href="#creating-a-subscription-plan" class="header-anchor">#</a> Creating a subscription plan</h3> <p>Go back to the <code>PrismSite</code> backend, go to the <code>Plans</code> page, and create a <code>Plan</code>. The <code>price ids</code> you need here are the same ones you created above.</p> <p><img src="/assets/img/38d04db14246b8c3008d303da81563dab3ba4a2db6949d77951f550c23735e6d.d38183b9.png" alt="picture 9"></p> <p>Fill in <code>price id</code> in order to create multiple <code>Plan</code>s.</p> <p>When you return to the <code>Links</code> page, at the bottom you can see the subscription links for the <code>plan</code> you just created.</p> <p><img src="/assets/img/0990f53c83bb94a02d8885a973aa6736f1de022081d874f3556ea40ff6abad83.f8b9e053.png" alt="picture 10"></p> <p>Add these links to the corresponding places in the <code>TargetSite</code> and the user will be redirected to the payment page when they click on it. (Login screen will be displayed for non-logged in users)</p> <h3 id="member-only-content-protection"><a href="#member-only-content-protection" class="header-anchor">#</a> Member-only content protection</h3> <p>Suppose the URL in <code>TargetSite</code> is <code>http://t.com/</code> and the member-visible content is placed in the <code>vip</code> directory. Now it is not protected and can be accessed directly through <code>http://t.com/vip/some.html</code>.</p> <p>Next, we will protect this directory.</p> <p>Go to the <code>Content</code> page of <code>PrismSite</code> and create a <code>content</code>.</p> <ul><li>Folder or pages URL: the protected directory or pages, in the above example, fill in <code>/vip</code></li> <li>Match type: StartWith means the URL is protected as long as it starts with <code>/vip</code>; Exact means exact match</li> <li>Redirect for non-members: The description page to be redirected to when non-members visit. This is usually the sales page for subscriptions.</li></ul> <p><img src="/assets/img/fcfe6c149194be94f11e7de6691f6de6e09593fe10f305c7dac2c1a3853251e2.197c7d78.png" alt="picture 11"></p> <h3 id="assigning-content-to-a-subscription-plan"><a href="#assigning-content-to-a-subscription-plan" class="header-anchor">#</a> Assigning content to a subscription plan</h3> <p>Go to the <code>Plans</code> page of <code>PrismSite</code> and you can assign member-visible content to the subscription plan. By clicking the edit icon in the <code>Contents</code> column of the list, you can select which content is available to members of this plan.</p> <p><img src="/assets/img/e9789275ff88333a7d004b0d1a2833fa8cc226882ea63b830e39295e1e1b5412.424e7ba4.png" alt="picture 12"></p> <p>Here Content can be multi-selected, hold Shift /Alt to select more than one.</p> <p>Hold Shift /Alt to select more than one. <a href="./images/92ade1fe984e3dded00156cbe7920d0de9d243f262b1a03c902583552ac61a03.png">picture 13</a></p> <p>After saving, the front-end protection will take effect in real time. The back-end protection will take effect after the user login expires (default is two days).</p> <p>Modify the <code>PRISM_MEMBER_EXPIRE_DAYS</code> setting in <code>web/.env</code> to make changes to the expiration time.</p> <div class="language-conf extra-class"><pre class="language-text"><code>PRISM_MEMBER_EXPIRE_DAYS=2
</code></pre></div><h2 id="back-end-protection"><a href="#back-end-protection" class="header-anchor">#</a> Back-end protection</h2> <h3 id="principle"><a href="#principle" class="header-anchor">#</a> Principle</h3> <p>The principle of front-end protection is that we add some JavaScript code to <code>TargetSite</code> that checks regularly, and when the user visits the protected URL and is not a member, we make the browser jump to another page. This way the protection is achieved.</p> <p>But in reality, the content is actually already in the browser, it's just not displayed, or it's displayed for a very short time. The content can actually be found by looking at the HTML, for example.</p> <p>To support scenarios that require more stringent protection of user content, MemberPrism provides proxy-based back-end protection.</p> <p>The principle of back-end protection is that the user accesses the <code>TargetSite</code>, but now accesses the <code>ProxySite</code> instead of the <code>TargetSite</code> directly. The <code>ProxySite</code> will first check if the user is accessing member content, and if they are a member. If the permissions are not enough, they are redirected directly.</p> <p>The difference is that in the back-end protection scheme, the member content is not sent to the browser, thus achieving true protection.</p> <h3 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h3> <p>Go to the <code>Settings</code> page of <code>PrismSite</code> and pull down to the bottom.</p> <p>Fill in the <code>Source site URL</code> with the URL of the <code>TargetSite</code> and the <code>Proxy site URL</code> with the URL of the <code>ProxySite</code> (that is, the URL that the end user accesses).</p> <p>The page will be redirected to the <code>Proxy site URL</code> after a successful payment, etc., so be sure to fill it in correctly.</p> <p><img src="/assets/img/43bd995595b8e51e9fe3eb9a0bf133e348b01336310e92530319197e9fddd701.d5e94f17.png" alt="picture 14"></p> <p>When you are done, click <code>Save</code> to save. After the page is refreshed, click <code>Update proxy settings</code> to generate the proxy settings. Each time you update the proxy-related functions in the future, you will need to manually click once.</p> <p>If the configuration is correct, the user should be able to use it normally via the <code>Proxy site URL</code>.</p> <h3 id="security"><a href="#security" class="header-anchor">#</a> Security</h3> <p>In the previous configuration, <code>TargetSite</code> and <code>ProxySite</code> can be accessed at the same time. Users who know the <code>TargetSite</code> URL may be able to bypass the back-end protection.</p> <p>Here we just need to add IP access restrictions to <code>TargetSite</code>, for example, so that it can only be accessed by the IP of <code>ProxySite</code>, to prevent the above potential problems.</p> <h2 id="more"><a href="#more" class="header-anchor">#</a> More</h2> <h3 id="about-the-author"><a href="#about-the-author" class="header-anchor">#</a> About the author</h3> <ul><li>HP: <a href="https://ftqq.com" target="_blank" rel="noopener noreferrer">https://ftqq.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Twitter: <a href="https://twitter.com/easychen" target="_blank" rel="noopener noreferrer">https://twitter.com/easychen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Email: easychen(a.t)gmail.com</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.216dffaf.js" defer></script><script src="/assets/js/2.abbacd5f.js" defer></script><script src="/assets/js/4.5e253ff5.js" defer></script>
  </body>
</html>
