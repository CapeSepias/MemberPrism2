(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{318:function(e,t,a){e.exports=a.p+"assets/img/817daf704b66a572f2c3b163320abbc0508b2dd200f7dfd36ab294f58e0e19e0.e3533ad6.png"},319:function(e,t,a){e.exports=a.p+"assets/img/54fc0a9b336b290c16ebf4375808f1c6a15b8fe7f916073893680fce7077950c.38e22bbb.png"},320:function(e,t,a){e.exports=a.p+"assets/img/b217c0402e8f49361a24080b2c91e28f1a24c0b26760aaf89871ac00a0949c9e.01cd5750.png"},321:function(e,t,a){e.exports=a.p+"assets/img/ff792949fdb0d8359b1f20a1db6763d23430e8d94b58180f38be1342f8ccce0c.33b19f02.png"},322:function(e,t,a){e.exports=a.p+"assets/img/42b313a369564f02f6cc7afb400de46e6d08e6d25cf2df0802babdec3263866b.1caaebb8.png"},323:function(e,t,a){e.exports=a.p+"assets/img/f88288b384cfd27d55d410ba9015be1d1b32ed6cf060b46f73dae23f0f497fc4.49898d8d.png"},324:function(e,t,a){e.exports=a.p+"assets/img/20014d5f04411184559b7a49ca1300a9b95e867acda5b7942524f035e054a28b.0f836819.png"},325:function(e,t,a){e.exports=a.p+"assets/img/554aaa554abae4a604986b38b3fbd9900e29aa433448adcb58188a351b3a1ec7.dfacdb2f.png"},326:function(e,t,a){e.exports=a.p+"assets/img/a1cac133c49ff024b2024d1a78d2da451d1e58d3c827651e4dc62090d9e87183.488a5649.png"},327:function(e,t,a){e.exports=a.p+"assets/img/e5629dd0d0718e6844a29966eaa1be70ff69f6d540b9df73fb512a8455a1faaf.5892a7f7.png"},328:function(e,t,a){e.exports=a.p+"assets/img/5d488deee54ed0b05ffdb6fd5f5642e33bbefa4a441bb81c8a072cc681598c8e.1becf902.png"},329:function(e,t,a){e.exports=a.p+"assets/img/5d1e579c1b1b685a759be5201f47a734ee568cc012d068cd18b6b0f533927104.18804581.png"},330:function(e,t,a){e.exports=a.p+"assets/img/548d567dbab937cd2c77d9bce2e62132c91df20b2c4f027aa7871136fdf7f2ac.a95fb44a.png"},331:function(e,t,a){e.exports=a.p+"assets/img/f78cb444544a6985f61463396f626bde993a360412463d1726af53250fe548f4.82c20197.png"},332:function(e,t,a){e.exports=a.p+"assets/img/9a3fe6dce02bd6cc8484f711f949c16e42c35e84d13d4ea0ace536dc7122f750.969bde3b.png"},333:function(e,t,a){e.exports=a.p+"assets/img/48fa4dbf28e3314719f9b69e246ca7bd9f397f64311a11e799e44524aaf46dee.75964ac4.png"},334:function(e,t,a){e.exports=a.p+"assets/img/fc8073dcebc631393515945821d4c101d32b80aaea1c399e59c47eeb94ef1b68.ecb0794d.png"},335:function(e,t,a){e.exports=a.p+"assets/img/38d04db14246b8c3008d303da81563dab3ba4a2db6949d77951f550c23735e6d.d38183b9.png"},336:function(e,t,a){e.exports=a.p+"assets/img/0990f53c83bb94a02d8885a973aa6736f1de022081d874f3556ea40ff6abad83.f8b9e053.png"},337:function(e,t,a){e.exports=a.p+"assets/img/fcfe6c149194be94f11e7de6691f6de6e09593fe10f305c7dac2c1a3853251e2.197c7d78.png"},338:function(e,t,a){e.exports=a.p+"assets/img/e9789275ff88333a7d004b0d1a2833fa8cc226882ea63b830e39295e1e1b5412.424e7ba4.png"},339:function(e,t,a){e.exports=a.p+"assets/img/43bd995595b8e51e9fe3eb9a0bf133e348b01336310e92530319197e9fddd701.d5e94f17.png"},395:function(e,t,a){"use strict";a.r(t);var s=a(40),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"memberprism-documentation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#memberprism-documentation"}},[e._v("#")]),e._v(" MemberPrism Documentation")]),e._v(" "),s("p",[s("RouterLink",{attrs:{to:"/zh/"}},[e._v("简体中文")])],1),e._v(" "),s("p",[e._v("⚠️ This document was translated into English by deepl and can be improved by PR")]),e._v(" "),s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),s("p",[e._v("MemberPrism is an open source project for providing membership, subscription and content protection features to existing websites, especially static ones.")]),e._v(" "),s("p",[e._v("It features a plug-in approach that allows you to add functionality immediately with a few lines of code. At the same time, these features are implemented in a floating layer format, so that users do not need to leave the site to complete the above features.")]),e._v(" "),s("h3",{attrs:{id:"features"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[e._v("#")]),e._v(" Features")]),e._v(" "),s("p",[e._v("MemberPrism currently provides the following features.")]),e._v(" "),s("ul",[s("li",[e._v("Membership Management\n"),s("ul",[s("li",[e._v("Registration")]),e._v(" "),s("li",[e._v("Login")]),e._v(" "),s("li",[e._v("Logout")]),e._v(" "),s("li",[e._v("Change user level: user/admin")])])]),e._v(" "),s("li",[e._v("Subscription Management\n"),s("ul",[s("li",[e._v("Add, modify, delete, deactivate subscription plans")]),e._v(" "),s("li",[e._v("Subscribe to a plan through a link")]),e._v(" "),s("li",[e._v("User modify, unsubscribe")])])]),e._v(" "),s("li",[e._v("Member content protection\n"),s("ul",[s("li",[e._v("Add, modify, delete, deactivate member content")]),e._v(" "),s("li",[e._v("Assigning member content to a subscription plan")]),e._v(" "),s("li",[e._v("Front-end protection of member content via JavaScript")]),e._v(" "),s("li",[e._v("Back-end protection of member content via MemberProxy")])])])]),e._v(" "),s("h3",{attrs:{id:"screenshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#screenshot"}},[e._v("#")]),e._v(" Screenshot")]),e._v(" "),s("p",[s("img",{attrs:{src:a(318),alt:"picture 15"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(319),alt:"picture 16"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(320),alt:"picture 17"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(321),alt:"picture 18"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(322),alt:"picture 19"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(323),alt:"picture 20"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(324),alt:"picture 21"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(325),alt:"picture 22"}})]),e._v(" "),s("p",[s("img",{attrs:{src:a(326),alt:"picture 23"}})]),e._v(" "),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),s("h3",{attrs:{id:"installation-via-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation-via-docker"}},[e._v("#")]),e._v(" Installation via Docker")]),e._v(" "),s("p",[e._v("For easy installation, we provide the Docker installation method. It is also recommended to use this method in preference.")]),e._v(" "),s("h4",{attrs:{id:"dependency-environment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dependency-environment"}},[e._v("#")]),e._v(" Dependency Environment")]),e._v(" "),s("p",[e._v("First, you need a container environment that supports "),s("code",[e._v("git")]),e._v(" and "),s("code",[e._v("docker-compose")]),e._v(". If you don't already have it, you can refer to "),s("a",{attrs:{href:"https://www.digitalocean.com/community/tutorials/how-to-install-and-",target:"_blank",rel:"noopener noreferrer"}},[e._v("this article"),s("OutboundLink")],1),e._v(" use-docker-compose-on-ubuntu-20-04).")]),e._v(" "),s("h4",{attrs:{id:"initialization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initialization"}},[e._v("#")]),e._v(" Initialization")]),e._v(" "),s("p",[e._v("Start by clone the project code")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/easychen/member-prism.git prism\n")])])]),s("p",[e._v("Go to the directory and start the service with "),s("code",[e._v("docker-compose")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" prism "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&&")]),e._v(" docker-compose up -d\n")])])]),s("p",[e._v("The service will start two ports.")]),e._v(" "),s("ul",[s("li",[e._v("8801: MemberPrism, the website")]),e._v(" "),s("li",[e._v("8802: MemberProxy, where users will access when backend protection is enabled")])]),e._v(" "),s("p",[e._v("The ports for these two services can be adjusted by modifying the "),s("code",[e._v("port")]),e._v(" section in "),s("code",[e._v("docker-compose.yaml")]),e._v(" in the root directory.")]),e._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'8801:80'")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'8802:8802'")]),e._v("\n")])])]),s("h5",{attrs:{id:"https-support"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#https-support"}},[e._v("#")]),e._v(" HTTPS Support")]),e._v(" "),s("p",[e._v("First, put the certificate in the "),s("code",[e._v("ssl")]),e._v(" directory.")]),e._v(" "),s("p",[e._v("Open "),s("code",[e._v("docker/web/vhost.conf")]),e._v(" and remove the comments before the following lines.")]),e._v(" "),s("div",{staticClass:"language-conf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("SSLEngine on\nSSLCertificateFile /app/ssl/server.crt\nSSLCertificateKeyFile /app/ssl/server.key\n")])])]),s("p",[e._v("Open "),s("code",[e._v("web/.env")]),e._v(" and change "),s("code",[e._v("PRISM_HTTPS")]),e._v(" to "),s("code",[e._v("true")]),e._v(".")]),e._v(" "),s("div",{staticClass:"language-conf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("PRISM_HTTPS=true\n")])])]),s("h3",{attrs:{id:"manual-installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#manual-installation"}},[e._v("#")]),e._v(" Manual installation")]),e._v(" "),s("p",[e._v("The main part of MemberPrism is written in Laravel, so developers who are familiar with Laravel can easily build it.")]),e._v(" "),s("p",[e._v("Go to the web directory")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /app/web \n")])])]),s("p",[e._v("Install the dependencies via compser")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("composer")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" \n")])])]),s("p",[e._v("Copy "),s("code",[e._v(".env.example")]),e._v(" to "),s("code",[e._v(".env")]),e._v(" and modify it as appropriate.")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" .env.example .env \n")])])]),s("p",[e._v("Generate the app key")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("php artisan key:generate \n")])])]),s("p",[e._v("Initialize the database and fill in the default account")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("php artisan migrate --seed\n")])])]),s("p",[e._v("You need to make sure the following directories are writable, you can change them to 755 or 777.")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" -R 0777 /app/web/storage\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" -R 0777 /app/web/bootstrap/cache/\n")])])]),s("p",[e._v("Start proxy")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /app/proxy "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&&")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v(" /server-linux "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),e._v("\n")])])]),s("p",[e._v("If you are on a Mac environment, use")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /app/proxy "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&&")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v(" /server-mac "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),e._v("\n")])])]),s("h2",{attrs:{id:"adding-functionality-to-a-website"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-functionality-to-a-website"}},[e._v("#")]),e._v(" Adding functionality to a website")]),e._v(" "),s("p",[e._v("First clarify the following terms.")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("TargetSite")]),e._v(": the site where you need to add membership and subscription features")]),e._v(" "),s("li",[s("code",[e._v("PrismSite")]),e._v(": default "),s("code",[e._v("8801")]),e._v(" port corresponding to the main site")]),e._v(" "),s("li",[s("code",[e._v("ProxySite")]),e._v(": default "),s("code",[e._v("8802")]),e._v(" port corresponding to the proxy site")])]),e._v(" "),s("p",[e._v("After installation, visit "),s("code",[e._v("<ip>:8801")]),e._v(" to access "),s("code",[e._v("PrismSite")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"admin-account"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin-account"}},[e._v("#")]),e._v(" Admin account")]),e._v(" "),s("p",[e._v("Login with the following account.")]),e._v(" "),s("ul",[s("li",[e._v("Username: "),s("code",[e._v("admin@memberprism.com")])]),e._v(" "),s("li",[e._v("Password: "),s("code",[e._v("admin")])])]),e._v(" "),s("p",[e._v("After logging in, go to the "),s("code",[e._v("members")]),e._v(" page and click "),s("code",[e._v("level")]),e._v(" to change the user's level.\n"),s("img",{attrs:{src:a(327),alt:"p1"}})]),e._v(" "),s("h3",{attrs:{id:"configure-the-url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-url"}},[e._v("#")]),e._v(" Configure the URL")]),e._v(" "),s("p",[e._v("Go to the "),s("code",[e._v("Settings")]),e._v(" page and set the name and URL of the "),s("code",[e._v("PrismSite")]),e._v(" website. This URL will finally need to be accessible to "),s("code",[e._v("TargetSite")]),e._v(" users.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(328),alt:"p3"}})]),e._v(" "),s("h3",{attrs:{id:"get-the-installation-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-the-installation-code"}},[e._v("#")]),e._v(" Get the installation code")]),e._v(" "),s("p",[e._v("Go to the "),s("code",[e._v("Links")]),e._v(" page, copy "),s("code",[e._v("Head scripts")]),e._v(" and paste it into the "),s("code",[e._v("<head>")]),e._v(" tag on the "),s("code",[e._v("TargetSite")]),e._v(" site page. Note that this code needs to be added to any page that wants to use the MemberPrism feature.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(329),alt:"p2"}})]),e._v(" "),s("h3",{attrs:{id:"copy-feature-links"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#copy-feature-links"}},[e._v("#")]),e._v(" Copy feature links")]),e._v(" "),s("p",[e._v("At the bottom of the "),s("code",[e._v("Links")]),e._v(" page, there is the URL for "),s("code",[e._v("Login")]),e._v(", which can be copied and pasted into the corresponding link in "),s("code",[e._v("TargetSite")]),e._v(".")]),e._v(" "),s("p",[e._v("The code looks like")]),e._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("a")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("#prism-ajax-login"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("Login</a\n")])])]),s("p",[e._v("When clicked, the result looks like this.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(330),alt:"picture 4"}})]),e._v(" "),s("p",[e._v("After adding the "),s("code",[e._v("registration")]),e._v(", "),s("code",[e._v("profile")]),e._v(" links, this site will have a user system.")]),e._v(" "),s("h2",{attrs:{id:"subscription-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#subscription-configuration"}},[e._v("#")]),e._v(" Subscription configuration")]),e._v(" "),s("p",[e._v("MemberPrism uses "),s("a",{attrs:{href:"https://stripe.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stripe"),s("OutboundLink")],1),e._v(" to implement payment and subscription related features. This requires you to register a Stripe account first.")]),e._v(" "),s("p",[e._v("The following is an example of "),s("code",[e._v("test mode")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"configure-stripe-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configure-stripe-key"}},[e._v("#")]),e._v(" Configure Stripe Key")]),e._v(" "),s("p",[e._v("Open the "),s("a",{attrs:{href:"https://dashboard.stripe.com/test/apikeys",target:"_blank",rel:"noopener noreferrer"}},[e._v("API Keys page"),s("OutboundLink")],1),e._v(" under the "),s("code",[e._v("Developers")]),e._v(" menu.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(331),alt:"picture 5"}})]),e._v(" "),s("p",[e._v("Copy the corresponding Key and fill in the corresponding option in "),s("code",[e._v("Settings")]),e._v(" of "),s("code",[e._v("PrismSite")]),e._v(": !")]),e._v(" "),s("p",[s("img",{attrs:{src:a(332),alt:"picture 6"}})]),e._v(" "),s("h3",{attrs:{id:"create-price-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-price-id"}},[e._v("#")]),e._v(" Create Price ID")]),e._v(" "),s("p",[e._v("Go to the Stripe dashboard and create a "),s("a",{attrs:{href:"https://dashboard.stripe.com/test/products/create",target:"_blank",rel:"noopener noreferrer"}},[e._v("product"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("Note that in the Pricing section, select Recurring so that it will automatically renew. Just fill in the rest of the fields as you want.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(333),alt:"picture 7"}})]),e._v(" "),s("p",[e._v("After creating the product, go to the product details page and you can see the API ID in the Pricing section and record it.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(334),alt:"picture 8"}})]),e._v(" "),s("p",[e._v("You can create multiple prices according to your needs, and each level of subscription, monthly and yearly payment should be a different price id. These price ids need to be recorded and will be used later when you create a subscription plan.")]),e._v(" "),s("h3",{attrs:{id:"creating-a-subscription-plan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-subscription-plan"}},[e._v("#")]),e._v(" Creating a subscription plan")]),e._v(" "),s("p",[e._v("Go back to the "),s("code",[e._v("PrismSite")]),e._v(" backend, go to the "),s("code",[e._v("Plans")]),e._v(" page, and create a "),s("code",[e._v("Plan")]),e._v(". The "),s("code",[e._v("price ids")]),e._v(" you need here are the same ones you created above.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(335),alt:"picture 9"}})]),e._v(" "),s("p",[e._v("Fill in "),s("code",[e._v("price id")]),e._v(" in order to create multiple "),s("code",[e._v("Plan")]),e._v("s.")]),e._v(" "),s("p",[e._v("When you return to the "),s("code",[e._v("Links")]),e._v(" page, at the bottom you can see the subscription links for the "),s("code",[e._v("plan")]),e._v(" you just created.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(336),alt:"picture 10"}})]),e._v(" "),s("p",[e._v("Add these links to the corresponding places in the "),s("code",[e._v("TargetSite")]),e._v(" and the user will be redirected to the payment page when they click on it. (Login screen will be displayed for non-logged in users)")]),e._v(" "),s("h3",{attrs:{id:"member-only-content-protection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#member-only-content-protection"}},[e._v("#")]),e._v(" Member-only content protection")]),e._v(" "),s("p",[e._v("Suppose the URL in "),s("code",[e._v("TargetSite")]),e._v(" is "),s("code",[e._v("http://t.com/")]),e._v(" and the member-visible content is placed in the "),s("code",[e._v("vip")]),e._v(" directory. Now it is not protected and can be accessed directly through "),s("code",[e._v("http://t.com/vip/some.html")]),e._v(".")]),e._v(" "),s("p",[e._v("Next, we will protect this directory.")]),e._v(" "),s("p",[e._v("Go to the "),s("code",[e._v("Content")]),e._v(" page of "),s("code",[e._v("PrismSite")]),e._v(" and create a "),s("code",[e._v("content")]),e._v(".")]),e._v(" "),s("ul",[s("li",[e._v("Folder or pages URL: the protected directory or pages, in the above example, fill in "),s("code",[e._v("/vip")])]),e._v(" "),s("li",[e._v("Match type: StartWith means the URL is protected as long as it starts with "),s("code",[e._v("/vip")]),e._v("; Exact means exact match")]),e._v(" "),s("li",[e._v("Redirect for non-members: The description page to be redirected to when non-members visit. This is usually the sales page for subscriptions.")])]),e._v(" "),s("p",[s("img",{attrs:{src:a(337),alt:"picture 11"}})]),e._v(" "),s("h3",{attrs:{id:"assigning-content-to-a-subscription-plan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#assigning-content-to-a-subscription-plan"}},[e._v("#")]),e._v(" Assigning content to a subscription plan")]),e._v(" "),s("p",[e._v("Go to the "),s("code",[e._v("Plans")]),e._v(" page of "),s("code",[e._v("PrismSite")]),e._v(" and you can assign member-visible content to the subscription plan. By clicking the edit icon in the "),s("code",[e._v("Contents")]),e._v(" column of the list, you can select which content is available to members of this plan.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(338),alt:"picture 12"}})]),e._v(" "),s("p",[e._v("Here Content can be multi-selected, hold Shift /Alt to select more than one.")]),e._v(" "),s("p",[e._v("Hold Shift /Alt to select more than one. "),s("a",{attrs:{href:"./images/92ade1fe984e3dded00156cbe7920d0de9d243f262b1a03c902583552ac61a03.png"}},[e._v("picture 13")])]),e._v(" "),s("p",[e._v("After saving, the front-end protection will take effect in real time. The back-end protection will take effect after the user login expires (default is two days).")]),e._v(" "),s("p",[e._v("Modify the "),s("code",[e._v("PRISM_MEMBER_EXPIRE_DAYS")]),e._v(" setting in "),s("code",[e._v("web/.env")]),e._v(" to make changes to the expiration time.")]),e._v(" "),s("div",{staticClass:"language-conf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("PRISM_MEMBER_EXPIRE_DAYS=2\n")])])]),s("h2",{attrs:{id:"back-end-protection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#back-end-protection"}},[e._v("#")]),e._v(" Back-end protection")]),e._v(" "),s("h3",{attrs:{id:"principle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#principle"}},[e._v("#")]),e._v(" Principle")]),e._v(" "),s("p",[e._v("The principle of front-end protection is that we add some JavaScript code to "),s("code",[e._v("TargetSite")]),e._v(" that checks regularly, and when the user visits the protected URL and is not a member, we make the browser jump to another page. This way the protection is achieved.")]),e._v(" "),s("p",[e._v("But in reality, the content is actually already in the browser, it's just not displayed, or it's displayed for a very short time. The content can actually be found by looking at the HTML, for example.")]),e._v(" "),s("p",[e._v("To support scenarios that require more stringent protection of user content, MemberPrism provides proxy-based back-end protection.")]),e._v(" "),s("p",[e._v("The principle of back-end protection is that the user accesses the "),s("code",[e._v("TargetSite")]),e._v(", but now accesses the "),s("code",[e._v("ProxySite")]),e._v(" instead of the "),s("code",[e._v("TargetSite")]),e._v(" directly. The "),s("code",[e._v("ProxySite")]),e._v(" will first check if the user is accessing member content, and if they are a member. If the permissions are not enough, they are redirected directly.")]),e._v(" "),s("p",[e._v("The difference is that in the back-end protection scheme, the member content is not sent to the browser, thus achieving true protection.")]),e._v(" "),s("h3",{attrs:{id:"usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),s("p",[e._v("Go to the "),s("code",[e._v("Settings")]),e._v(" page of "),s("code",[e._v("PrismSite")]),e._v(" and pull down to the bottom.")]),e._v(" "),s("p",[e._v("Fill in the "),s("code",[e._v("Source site URL")]),e._v(" with the URL of the "),s("code",[e._v("TargetSite")]),e._v(" and the "),s("code",[e._v("Proxy site URL")]),e._v(" with the URL of the "),s("code",[e._v("ProxySite")]),e._v(" (that is, the URL that the end user accesses).")]),e._v(" "),s("p",[e._v("The page will be redirected to the "),s("code",[e._v("Proxy site URL")]),e._v(" after a successful payment, etc., so be sure to fill it in correctly.")]),e._v(" "),s("p",[s("img",{attrs:{src:a(339),alt:"picture 14"}})]),e._v(" "),s("p",[e._v("When you are done, click "),s("code",[e._v("Save")]),e._v(" to save. After the page is refreshed, click "),s("code",[e._v("Update proxy settings")]),e._v(" to generate the proxy settings. Each time you update the proxy-related functions in the future, you will need to manually click once.")]),e._v(" "),s("p",[e._v("If the configuration is correct, the user should be able to use it normally via the "),s("code",[e._v("Proxy site URL")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"security"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security"}},[e._v("#")]),e._v(" Security")]),e._v(" "),s("p",[e._v("In the previous configuration, "),s("code",[e._v("TargetSite")]),e._v(" and "),s("code",[e._v("ProxySite")]),e._v(" can be accessed at the same time. Users who know the "),s("code",[e._v("TargetSite")]),e._v(" URL may be able to bypass the back-end protection.")]),e._v(" "),s("p",[e._v("Here we just need to add IP access restrictions to "),s("code",[e._v("TargetSite")]),e._v(", for example, so that it can only be accessed by the IP of "),s("code",[e._v("ProxySite")]),e._v(", to prevent the above potential problems.")]),e._v(" "),s("h2",{attrs:{id:"more"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#more"}},[e._v("#")]),e._v(" More")]),e._v(" "),s("h3",{attrs:{id:"about-the-author"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#about-the-author"}},[e._v("#")]),e._v(" About the author")]),e._v(" "),s("ul",[s("li",[e._v("HP: "),s("a",{attrs:{href:"https://ftqq.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://ftqq.com"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("Twitter: "),s("a",{attrs:{href:"https://twitter.com/easychen",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://twitter.com/easychen"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("Email: easychen(a.t)gmail.com")])])])}),[],!1,null,null,null);t.default=r.exports}}]);